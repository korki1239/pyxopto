

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Material &mdash; PyXOpto 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Scattering phase functions" href="phase_function.html" />
    <link rel="prev" title="Voxelized MC" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> PyXOpto
          

          
            
            <img src="../../_static/xopto_logo_dark.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opencl_devices.html">OpenCL devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mcml/index.html">Layered MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mccyl/index.html">Cylindrical MC</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Voxelized MC</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Material</a></li>
<li class="toctree-l2"><a class="reference internal" href="phase_function.html">Scattering phase functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluence.html">Fluence</a></li>
<li class="toctree-l2"><a class="reference internal" href="trace.html">Trace</a></li>
<li class="toctree-l2"><a class="reference internal" href="sampling_volume.html">Sampling volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulator_data_types.html">Simulator data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulator_options.html">Simulator options</a></li>
<li class="toctree-l2"><a class="reference internal" href="opencl_build_options.html">OpenCL build options</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/index.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dataset/index.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/modules.html">xopto</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyXOpto</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Voxelized MC</a> &raquo;</li>
        
      <li>Material</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="material">
<span id="mcvox-material-label"></span><h1>Material<a class="headerlink" href="#material" title="Permalink to this headline">¶</a></h1>
<p>Each voxel of the volume can be assigned a different material. Materials are
defined as instances of <a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Material" title="xopto.mcbase.mcmaterial.Material"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcmaterial.Material</span></code></a>.
The constructor takes several parameters that define the optical properties of
the material.</p>
<ol class="arabic simple">
<li><p>The refractive index is defined by parameter <code class="code docutils literal notranslate"><span class="pre">n</span></code>.</p></li>
<li><p>The scattering coefficient is defined by parameter <code class="code docutils literal notranslate"><span class="pre">mus</span></code> (m <sup>-1</sup>).</p></li>
<li><p>The absorption coefficient is defined by parameter <code class="code docutils literal notranslate"><span class="pre">mua</span></code> (m <sup>-1</sup>).</p></li>
<li><p>The scattering phase function is defined by parameter <code class="code docutils literal notranslate"><span class="pre">pf</span></code> that can
be any instance of <a class="reference internal" href="../../apidoc/xopto.mcbase.mcpf.pfbase.html#xopto.mcbase.mcpf.pfbase.PfBase" title="xopto.mcbase.mcpf.pfbase.PfBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcpf.pfbase.PfBase</span></code></a>.</p></li>
</ol>
<p>The following example creates a material with a refractive index 1.33,
absorption coefficient 1 cm <sup>-1</sup> , scattering coefficient
50 cm <sup>-1</sup> and Henyey-Greenstein scattering phase function
with anisotropy 0.9.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xopto.mcvox</span> <span class="kn">import</span> <span class="n">mc</span>

<span class="n">material</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">mcmaterial</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">1.33</span><span class="p">,</span> <span class="n">mua</span><span class="o">=</span><span class="mf">1.0e2</span><span class="p">,</span> <span class="n">mus</span><span class="o">=</span><span class="mf">50.0e2</span><span class="p">,</span> <span class="n">pf</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">mcpf</span><span class="o">.</span><span class="n">Hg</span><span class="p">(</span><span class="mf">0.9</span><span class="p">))</span>
</pre></div>
</div>
<p>All the optical properties of a material that were set
through the constructor <a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Material" title="xopto.mcbase.mcmaterial.Material"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Material()</span></code></a>
can be later changed through accessing the instance properties. In case of
the scattering phase function, first access the
<a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Material.pf" title="xopto.mcbase.mcmaterial.Material.pf"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pf</span></code></a> material property
and from there any of the properties implemented by the scattering
phase function model. Note that the Henyey-Greenstein scattering phase
function from this example exposes only the anisotropy
<a class="reference internal" href="../../apidoc/xopto.mcbase.mcpf.hg.html#xopto.mcbase.mcpf.hg.Hg.g" title="xopto.mcbase.mcpf.hg.Hg.g"><code class="xref py py-attr docutils literal notranslate"><span class="pre">g</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">material</span><span class="o">.</span><span class="n">mua</span> <span class="o">=</span> <span class="mf">0.5e2</span>
<span class="n">material</span><span class="o">.</span><span class="n">mus</span> <span class="o">=</span> <span class="mf">40.0e2</span>
<span class="n">material</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mf">1.452</span>
<span class="n">material</span><span class="o">.</span><span class="n">pf</span><span class="o">.</span><span class="n">g</span> <span class="o">=</span> <span class="mf">0.9</span>
</pre></div>
</div>
<p>The individual materials are then combined into a list through
<a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Materials" title="xopto.mcbase.mcmaterial.Materials"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Materials()</span></code></a>. The constructor takes
a list of <a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Material" title="xopto.mcbase.mcmaterial.Material"><code class="xref py py-class docutils literal notranslate"><span class="pre">Material</span></code></a>. The created
instance manages the transfer of data between the host and the OpenCL device.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">materials</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">mcmaterial</span><span class="o">.</span><span class="n">Materials</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">mc</span><span class="o">.</span><span class="n">mcmaterial</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">mua</span><span class="o">=</span><span class="mf">0.0e2</span><span class="p">,</span> <span class="n">mus</span><span class="o">=</span><span class="mf">0.0e2</span><span class="p">,</span>  <span class="n">pf</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">mcpf</span><span class="o">.</span><span class="n">Hg</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)),</span>
        <span class="n">mc</span><span class="o">.</span><span class="n">mcmaterial</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span> <span class="n">mua</span><span class="o">=</span><span class="mf">1.0e2</span><span class="p">,</span> <span class="n">mus</span><span class="o">=</span><span class="mf">50.0e2</span><span class="p">,</span> <span class="n">pf</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">mcpf</span><span class="o">.</span><span class="n">Hg</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)),</span>
        <span class="n">mc</span><span class="o">.</span><span class="n">mcmaterial</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">mua</span><span class="o">=</span><span class="mf">2.0e2</span><span class="p">,</span> <span class="n">mus</span><span class="o">=</span><span class="mf">10.0e2</span><span class="p">,</span> <span class="n">pf</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">mcpf</span><span class="o">.</span><span class="n">Hg</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that the first material in the list represent the surrounding
medium. The absorption coefficient <code class="code docutils literal notranslate"><span class="pre">mua</span></code>, scattering coefficient
<code class="code docutils literal notranslate"><span class="pre">mus</span></code> and the scattering phase function <code class="code docutils literal notranslate"><span class="pre">pf</span></code> of the
first material are not used in the MC simulations, since the
photon packets are not propagated through the surrounding medium.
However, the refractive index <code class="code docutils literal notranslate"><span class="pre">n</span></code> of the surrounding medium
is used to properly refract/reflect the photon packet at the sample surface
when launched by the source or when escaping the sample.</p>
<p>Voxels of the samples can be labeled by a particular material through the
corresponding index of the material in the list. A label 0 will set the
voxel material to the same material as is used for the surrounding medium.</p>
<p>The properties of materials in the list can be modified at any time
through accessing the individual materials and from there the material
properties. The number of materials (including the material of the surrounding
medium) can be determined through the builtin <code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code>. The individual
materials can be accessed using the <code class="code docutils literal notranslate"><span class="pre">[]</span></code> operator or
<a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Materials.material" title="xopto.mcbase.mcmaterial.Materials.material"><code class="xref py py-meth docutils literal notranslate"><span class="pre">material()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">materials</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mua</span> <span class="o">=</span> <span class="mf">0.5e2</span>
<span class="n">materials</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">mua</span> <span class="o">=</span> <span class="mf">0.5e2</span>

<span class="n">num_materials</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">materials</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Material" title="xopto.mcbase.mcmaterial.Material"><code class="xref py py-class docutils literal notranslate"><span class="pre">Material</span></code></a> and
<a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Materials" title="xopto.mcbase.mcmaterial.Materials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Materials</span></code></a> produce an informative
human-readable output when used with the <code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code> builtin.</p>
<p>Applying <code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code> to a material (instance of
<a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Material" title="xopto.mcbase.mcmaterial.Material"><code class="xref py py-class docutils literal notranslate"><span class="pre">Material</span></code></a>) will produce the
following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">materials</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Material(n=1.3, mua=100.0, mus=5000.0, pf=Hg(g=0.9)) # id 0x7F15B4CEF820.
</pre></div>
</div>
<p>Applying <code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code> to a list of materials (instance of
<a class="reference internal" href="../../apidoc/xopto.mcbase.mcmaterial.html#xopto.mcbase.mcmaterial.Materials" title="xopto.mcbase.mcmaterial.Materials"><code class="xref py py-class docutils literal notranslate"><span class="pre">Materials</span></code></a>) will produce the
following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">materials</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Materials([
    Material(n=1.0, mua=0.0, mus=0.0, pf=Hg(g=0.0)), # surrounding medium,
    Material(n=1.3, mua=100.0, mus=5000.0, pf=Hg(g=0.9)),
    Material(n=1.2, mua=200.0, mus=1000.0, pf=Hg(g=0.5))
]) # id 0x7F15B4CEFD30.
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="phase_function.html" class="btn btn-neutral float-right" title="Scattering phase functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Voxelized MC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, XOpto team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>