

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>xopto.mccyl.mclayer.layer module &mdash; PyXOpto 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="xopto.mccyl.mcobject package" href="xopto.mccyl.mcobject.html" />
    <link rel="prev" title="xopto.mccyl.mclayer package" href="xopto.mccyl.mclayer.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PyXOpto
          

          
            
            <img src="../_static/xopto_logo_dark.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../source/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/opencl_devices.html">OpenCL devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mcml/index.html">Layered MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mccyl/index.html">Cylindrical MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mcvox/index.html">Voxelized MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/dataset/index.html">Datasets</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">xopto</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="xopto.html">xopto package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="xopto.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="xopto.cl.html">xopto.cl package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.data.html">xopto.data package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.dataset.html">xopto.dataset package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.materials.html">xopto.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.mcbase.html">xopto.mcbase package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="xopto.mccyl.html">xopto.mccyl package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.mcml.html">xopto.mcml package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.mcvox.html">xopto.mcvox package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.pf.html">xopto.pf package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.src.html">xopto.src package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.util.html">xopto.util package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="xopto.html#module-xopto">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyXOpto</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">xopto</a> &raquo;</li>
        
          <li><a href="xopto.html">xopto package</a> &raquo;</li>
        
          <li><a href="xopto.mccyl.html">xopto.mccyl package</a> &raquo;</li>
        
          <li><a href="xopto.mccyl.mclayer.html">xopto.mccyl.mclayer package</a> &raquo;</li>
        
      <li>xopto.mccyl.mclayer.layer module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-xopto.mccyl.mclayer.layer">
<span id="xopto-mccyl-mclayer-layer-module"></span><h1>xopto.mccyl.mclayer.layer module<a class="headerlink" href="#module-xopto.mccyl.mclayer.layer" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Layer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mua</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mus</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcpf.pfbase.html#xopto.mcbase.mcpf.pfbase.PfBase" title="xopto.mcbase.mcpf.pfbase.PfBase"><span class="pre">xopto.mcbase.mcpf.pfbase.PfBase</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcobject.McObject</span></code></a></p>
<p>Class that represents a single sample layer.</p>
<p>Layer object constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>float</em>) – Layer diameter (m).</p></li>
<li><p><strong>n</strong> (<em>float</em>) – Index of refraction.</p></li>
<li><p><strong>mua</strong> (<em>float</em>) – Absorption coefficient (1/m).</p></li>
<li><p><strong>mus</strong> (<em>float</em>) – Scattering (NOT reduced) coefficient (1/m).</p></li>
<li><p><strong>pf</strong> (<em>mcpf.PfBase</em>) – Scattering phase function object that is derived from PhBase
class.</p></li>
</ul>
</dd>
</dl>
<p>The physical properties of the layer can be read or changed through
member properties:</p>
<blockquote>
<div><ul class="simple">
<li><p>d: float -
Layer diameter (m).</p></li>
<li><p>n: float -
Index of refraction.</p></li>
<li><p>mua: float -
Absorption coefficient (1/m).</p></li>
<li><p>mus: float -
Scattering (NOT reduced) coefficient (1/m).</p></li>
<li><p>pf: mcpf.PfBase -
Scattering phase function object that is derived from PhBase
class.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The inner layer boundary bellongs to the layer, but the outer does not.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.cl_type">
<span class="sig-name descname"><span class="pre">cl_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><span class="pre">xopto.cl.cltypes.Structure</span></a><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layer.cl_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.cl_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a structure data type that is used to represent one Layer
instance in the OpenCL kernel of the Monte Carlo simulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Monte Carlo simulator instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>opencl_t</strong> – OpenCL Structure that represents a layer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ClLayer</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.d">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">d</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.d" title="Permalink to this definition">¶</a></dt>
<dd><p>Layer diameter (m).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.fromdict">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mccyl.mclayer.layer.Layer" title="xopto.mccyl.mclayer.layer.Layer"><span class="pre">xopto.mccyl.mclayer.layer.Layer</span></a><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layer.fromdict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.fromdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new object from dict. The dict keys must match
the parameter names defined by the constructor.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.mua">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mua</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.mua" title="Permalink to this definition">¶</a></dt>
<dd><p>Absorption coefficient of the layer (1/m).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.mus">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mus</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.mus" title="Permalink to this definition">¶</a></dt>
<dd><p>Scattering coefficient of the layer (1/m).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.n">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">n</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.n" title="Permalink to this definition">¶</a></dt>
<dd><p>Refractive index of the layer.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.pf">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pf</span></span><em class="property"><span class="pre">:</span> <span class="pre">xopto.mcbase.mcpf.pfbase.PfBase</span></em><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.pf" title="Permalink to this definition">¶</a></dt>
<dd><p>Phase function object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layer.todict">
<span class="sig-name descname"><span class="pre">todict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">dict</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layer.todict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layer.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Export object to a dict.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Layers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">layers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#xopto.mccyl.mclayer.layer.Layer" title="xopto.mccyl.mclayer.layer.Layer"><span class="pre">xopto.mccyl.mclayer.layer.Layer</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcobject.McObject</span></code></a></p>
<p>Class that represents a stack of concentric layers forming the sample.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first layer of the stack is used to describe the
medium that surrounds the sample.
Therefore, at least two layers must be always specified,
namely the layer of the surrounding medium and one sample layer!
The diameter of the outermost layer (first in the list of layers)
will be automatically set to infinity regardless of the layer diameter
set by the user.</p>
</div>
<p>Constructs a managed sample layer stack from a list of sample layers.
The outermost layer that sourrounds the sample must be specified first,
followed by the sample layer from the outermost to the innermost.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first layer of the stack is used to describe the
medium that surrounds the sample.
Therefore, at least two layers must be always specified,
namely one layer of the surrounding medium and one sample layer!</p>
<p>The layers extend to infinity along both directions of the z axis.</p>
<p>The diameter of the outermost layer will be automatically set
to infinity when passed to the OpenCL kernel (regardless of the
layer diameter set by the user).</p>
<p>The layer diameters must be monotonically decreasing. Layers of
zero thickness (diameters of the previous and next layer are the
same) are not allowed.</p>
<p>Note that all layers must use the same scattering phase function
model.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>layers</strong> (<em>list</em><em> or </em><a class="reference internal" href="#xopto.mccyl.mclayer.layer.Layers" title="xopto.mccyl.mclayer.layer.Layers"><em>Layers</em></a>) – A list of sample layers. Requires at least 2 items!</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.check">
<span class="sig-name descname"><span class="pre">check</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the layers are consistent and using a single
scattering phase function type.
Raises exception on error.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.cl_declaration">
<span class="sig-name descname"><span class="pre">cl_declaration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.cl_declaration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.cl_declaration" title="Permalink to this definition">¶</a></dt>
<dd><p>OpenCL declarations of the scattering phase function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.cl_implementation">
<span class="sig-name descname"><span class="pre">cl_implementation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.cl_implementation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.cl_implementation" title="Permalink to this definition">¶</a></dt>
<dd><p>OpenCL implementation of the scattering phase function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.cl_options">
<span class="sig-name descname"><span class="pre">cl_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.cl_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.cl_options" title="Permalink to this definition">¶</a></dt>
<dd><p>OpenCL options of the scattering phase function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.cl_pack">
<span class="sig-name descname"><span class="pre">cl_pack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">_ctypes.Array</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">_ctypes.Array</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.cl_pack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.cl_pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Pack the layers into an OpenCL data type. The OpenCL data
type is returned by the <a class="reference internal" href="#xopto.mccyl.mclayer.layer.Layers.cl_type" title="xopto.mccyl.mclayer.layer.Layers.cl_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Layers.cl_type()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Monte Carlo simulator instance.</p></li>
<li><p><strong>target</strong> (<em>cltypes.Structure*len</em><em>(</em><em>self</em><em>)</em>) – A structure representing an array of Layers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>target</strong> – Filled structure received as an input argument or a new
instance if the input argument target is None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure">cltypes.Structure</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.cl_type">
<span class="sig-name descname"><span class="pre">cl_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">_ctypes.Array</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.cl_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.cl_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an OpenCL array of ClLayer structures that is used to
represent one instance of a layer stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Monte Carlo simulator instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>clarray</strong> – Array of ClLayers.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>cltypes.Structure*len(self)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.diameter">
<span class="sig-name descname"><span class="pre">diameter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.diameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.diameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Diameter of the layer stack excluding the outermost layer that
sourrounds the sample.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>diameter</strong> – The sample diameter excluding the outermost layer of
the surrounding medium.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.fromdict">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mccyl.mclayer.layer.Layers" title="xopto.mccyl.mclayer.layer.Layers"><span class="pre">xopto.mccyl.mclayer.layer.Layers</span></a><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.fromdict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.fromdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new Layers object from a dict. The dict keys must match
the parameter names defined by the constructor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.intersect">
<span class="sig-name descname"><span class="pre">intersect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entrance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.intersect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Intersect the sample with the ray and return the intersection.
Intersection is considered to exist only if the distance to
the intersection is positive or entrance is set to True</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>)</em>) – Ray origin.</p></li>
<li><p><strong>dir</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>)</em>) – Ray direction.</p></li>
<li><p><strong>entrance</strong> (<em>bool</em>) – If True, compute the entrance point regardless of the current
position of the ray (can be propagated backwards).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>intersection</strong> (<em>(float, float, float) or None</em>) – Returns intersection if one exists, else None.</p></li>
<li><p><strong>normal</strong> (<em>(float, float, float) or None</em>) – Surface normal of the sample that points in the
propagation direction.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.layer">
<span class="sig-name descname"><span class="pre">layer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mccyl.mclayer.layer.Layer" title="xopto.mccyl.mclayer.layer.Layer"><span class="pre">xopto.mccyl.mclayer.layer.Layer</span></a><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.layer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns layer at the specified index. Note that the first layer
(index 0) represents the medium sourounding the sample.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.layer_index">
<span class="sig-name descname"><span class="pre">layer_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.layer_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.layer_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the layer index that contains the given radius. Note that
the layer includes the inner surface boundary but not the outer surface
boundary, i.e. the r extent of the layer is [r_inner, r_outer), where
r_outer &gt; r_inner.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>r</strong> (<em>float</em>) – R coordinate (radius) of a point.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>layer_index</strong> – Index of the layer that contains the give radius r.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.todict">
<span class="sig-name descname"><span class="pre">todict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">dict</span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.todict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Export object to a dict.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.Layers.tolist">
<span class="sig-name descname"><span class="pre">tolist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#xopto.mccyl.mclayer.layer.Layer" title="xopto.mccyl.mclayer.layer.Layer"><span class="pre">xopto.mccyl.mclayer.layer.Layer</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#Layers.tolist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.Layers.tolist" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a weak copy of the list of managed layers.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>layers</strong> – List of managed layers</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[layers]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="xopto.mccyl.mclayer.layer.ray_cylinder_intersection">
<span class="sig-name descname"><span class="pre">ray_cylinder_intersection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/xopto/mccyl/mclayer/layer.html#ray_cylinder_intersection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mccyl.mclayer.layer.ray_cylinder_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes intersection between a cylinder <img class="math" src="../_images/math/8f4837dd742ba3bc2a9bbca1252b71f13d8e5a81.png" alt="x^2 + y^2 = r^2"/> that is
centered on the <img class="math" src="../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> axis and a ray
with origin at <img class="math" src="../_images/math/3865a75f3a59521f4ec2345eab630bc530e7e62a.png" alt="pos=(x_0, y_0, z_0)"/> and direction
<img class="math" src="../_images/math/f8c8ac49b710eceb52fe5fa6375cc6bf2678f883.png" alt="dir=(p_x, p_y, p_z)"/>. The ray propagation satisfies
a parametric equation
<img class="math" src="../_images/math/5db6cf942ad68aac9c470cce600c148339166aff.png" alt="(x, y, z) = (x_0, y_0, z_0) + t (p_x, p_y, p_z)"/>.
The intersection is governed by a  quadratic equation for distance to
intersection <img class="math" src="../_images/math/907a4add6d5db5b7f197f7924f1371b8ac404fe6.png" alt="t"/>:</p>
<div class="math">
<p><img src="../_images/math/47004256d06c34cc48e8374e25363fa68b473b54.png" alt="t^2 (p_x^2 + p_y^2) + 2 t (x_0 p_x + y_0 p_y) + x_0^2 + y_0^2 - r^2."/></p>
</div><p>Solution is found as <img class="math" src="../_images/math/91a9f8c72b2b394b106b2f4d25fc9f4c1865c01e.png" alt="t = \frac{-b \pm\sqrt{b^2 - 4 a c}}{2 a}"/>,
where:</p>
<div class="math">
<p><img src="../_images/math/2172e4c911cbc6ff117aa93ce0c8fbca10ce4c1b.png" alt="a = p_x^2 + p_y^2,

b = 2 (x_0 p_x + y_0 p_y),

c = x_0^2 + y_0^2 - r^2."/></p>
</div><p>If <img class="math" src="../_images/math/13dc89b7b31168910835c028abaec6fea6743145.png" alt="a=0"/> or <img class="math" src="../_images/math/58434216034e233cfa2e632e00a42e9fbd60aec2.png" alt="b^2 - 4 a c &lt; 0"/> there is no intersection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> (<em>float</em>) – Cylinder radius. The cylinder is aligned along the z axis.</p></li>
<li><p><strong>pos</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>]</em>) – Ray origin as a tuple (x, y, z).</p></li>
<li><p><strong>dir</strong> (<em>Tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>]</em>) – Ray direction as a tuple (x, y, z). Note that the length of the
direction vector must equal 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>intersections</strong> – Returns None if there is no intersection, else the two distances to the
intersection as a tuple (d1, d2).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple(float, float) or Tuple(None, None)</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="xopto.mccyl.mcobject.html" class="btn btn-neutral float-right" title="xopto.mccyl.mcobject package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="xopto.mccyl.mclayer.html" class="btn btn-neutral float-left" title="xopto.mccyl.mclayer package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, XOpto team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>