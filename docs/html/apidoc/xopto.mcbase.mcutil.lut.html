
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>xopto.mcbase.mcutil.lut module &#8212; PyXOpto 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="xopto.mcbase.cltypes module" href="xopto.mcbase.cltypes.html" />
    <link rel="prev" title="xopto.mcbase.mcutil.interp module" href="xopto.mcbase.mcutil.interp.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-xopto.mcbase.mcutil.lut">
<span id="xopto-mcbase-mcutil-lut-module"></span><h1>xopto.mcbase.mcutil.lut module<a class="headerlink" href="#module-xopto.mcbase.mcutil.lut" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.CollectionLut">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">CollectionLut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sensitivity</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">costheta</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#CollectionLut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.CollectionLut" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LinearLut" title="xopto.mcbase.mcutil.lut.LinearLut"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcutil.lut.LinearLut</span></code></a></p>
<p>A lookup table of detector sensitivity (collection efficiency)
as a function of the angle of incidence. Azimuthal symmetry of the
collection sensitivity is assumed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sensitivity</strong> (<em>np.ndarray</em><em> or </em><em>str</em>) – Detector sensitivity (efficiency) as a function of the
angle of incidence. If the value is a str, an instance is loaded
from the file represented by the string.</p></li>
<li><p><strong>cotheta</strong> (<em>np.ndarray</em>) – Angle of incidence cosines at which the detector
sensitivities are defined. If None, a vector of uniformly
distributed values from 0 to 1 is used.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – The size of lookup table that will be used in Monte Carlo
simulations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.EmissionLut">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">EmissionLut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radiance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">costheta</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meth</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'simps'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#EmissionLut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.EmissionLut" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LinearLut" title="xopto.mcbase.mcutil.lut.LinearLut"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcutil.lut.LinearLut</span></code></a></p>
<p>Constructs a lookup table for numerical sampling of the emission
angles of a source with the given angular emission
characteristics. Azimuthal symmetry of the emission characteristics
is assumed.</p>
<p>The constructed lookup table should be sampled by a uniform random
variable <img class="math" src="../_images/math/79a3d439d28652c547386f39b555d90d3aaf102d.png" alt="r"/> from [0, 1] and linear interpolation that will
yield the emission angle cosine (costheta):
.. math:</p>
<blockquote>
<div><p>f_{i} = r*n
i_1 = int(fp_index)
i_2 = min(i_1 + 1, n - 1)
delta = f_i - i_1
costheta = lut[i_1]*(1.0 - delta) + lut[i_2 + 1]*delta</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radiance</strong> (<em>np.ndarray</em><em>, </em><a class="reference internal" href="#xopto.mcbase.mcutil.lut.EmissionLut" title="xopto.mcbase.mcutil.lut.EmissionLut"><em>EmissionLut</em></a><em> or </em><em>str</em>) – Relative source radiance as a function of the angle of incidence
cosines given in the costheta array. If the value is an instance
of EmissionLut, a new weak copy of the instance is created. If the
value is a str, an instance is loaded from the file represented
by the string.</p></li>
<li><p><strong>costheta</strong> (<em>np.ndarray</em>) – Cosines of the angle of incidence at which the values in the
radiance array are defined.
If None, a uniformly distributed vector of values from 0 to 1
is used.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – Size of the lookup table that can be used to numerically sample
the emission angles.</p></li>
<li><p><strong>npts</strong> (<em>int</em>) – Number of uniformly distributed control points from
min(costheta) to max(costheta) used for simpson approximation
of the radiance CDF.</p></li>
<li><p><strong>meth</strong> (<em>str</em>) – Method that is used to compute the radiance CDF. Use “simps”
for Simpson or “quad” for adaptive-step integration.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LinearLut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lut_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LinearLut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcobject.McObject</span></code></a></p>
<p>Creates a linear lookup table instance. Samples in the lookup table
are uniformly spread between the positions of the first and last
lookup table element that are passed to the constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lut_data</strong> (<a class="reference internal" href="#xopto.mcbase.mcutil.lut.LinearLut" title="xopto.mcbase.mcutil.lut.LinearLut"><em>LinearLut</em></a><em>, </em><em>np.ndarray vector</em><em> or </em><em>str</em>) – If a numpy array, lookup table data as an array or array-like object.
If a str, a filename from which to load the instance.
If a LinearLut, a weak copy is created.</p></li>
<li><p><strong>first</strong> (<em>float</em>) – Position of the first element/entry in the lookup table.</p></li>
<li><p><strong>last</strong> (<em>float</em>) – Position of the last element/entry in the lookup table.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.cl_pack">
<span class="sig-name descname"><span class="pre">cl_pack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><span class="pre">xopto.cl.cltypes.Structure</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><span class="pre">xopto.cl.cltypes.Structure</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LinearLut.cl_pack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.cl_pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills the ctypes structure (target) with the data required by the
Monte Carlo simulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>McObject</em></a>) – Simulator instance.</p></li>
<li><p><strong>target</strong> (<em>cltypes.Struct</em>) – Ctypes structure to be filled with the lut parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>lut</strong> – Filled ctypes structured received as an input arguments.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>cltypes.Struct</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.cl_type">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">cl_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><span class="pre">xopto.cl.cltypes.Structure</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LinearLut.cl_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.cl_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Structure type that represents LinearLut in the OpenCL
kernel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Simulator instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>struct</strong> – OpenCL structure type that is used to represents a LinearLut
instance in the OpenCL kernel.</p>
<p>The returned structure type implements the following fields:</p>
<ul class="simple">
<li><dl class="simple">
<dt>first: mc_fp_t</dt><dd><p>The value of the independent variable for the first element in
the lookup table.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>inv_span: mc_fp_t</dt><dd><p>Inverse of the span of the independent variable (the span
is defined as the difference between the value of the
independent variable of the last and first element in the
lookup table).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>n: mc_size_t</dt><dd><p>The number of elements in the lookup table.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>offset: mc_size_t</dt><dd><p>Offset/index of the first element in the lookup table
from the start of the linear array that holds data of all
the lookup tables.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure">Structure</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.data">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup table data as a flat numpy array.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.first">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">first</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Position of the first point in the lookup table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.fromdict">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">fromdict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LinearLut" title="xopto.mcbase.mcutil.lut.LinearLut"><span class="pre">xopto.mcbase.mcutil.lut.LinearLut</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LinearLut.fromdict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.fromdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a linear lookup table instance from a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – Dictionary created by the <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LinearLut.todict" title="xopto.mcbase.mcutil.lut.LinearLut.todict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LinearLut.todict()</span></code></a> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.fromfile">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">fromfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LinearLut" title="xopto.mcbase.mcutil.lut.LinearLut"><span class="pre">xopto.mcbase.mcutil.lut.LinearLut</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LinearLut.fromfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.fromfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Load LinearLut instance from a npz file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Data file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>lut</strong> – A new LinearLut instance created from the file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#xopto.mcbase.mcutil.lut.LinearLut" title="xopto.mcbase.mcutil.lut.LinearLut">LinearLut</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.last">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">last</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.last" title="Permalink to this definition">¶</a></dt>
<dd><p>Position of the last point in the lookup table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LinearLut.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save instance to a compressed numpy file with extension .npz.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.span">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">span</span></span><em class="property"><span class="pre">:</span> <span class="pre">Tuple[float,</span> <span class="pre">float]</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.span" title="Permalink to this definition">¶</a></dt>
<dd><p>Distance between the positions of the first and last point in the lookup table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LinearLut.todict">
<span class="sig-name descname"><span class="pre">todict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">np2list</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">dict</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LinearLut.todict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LinearLut.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the lookup table configuration and data to a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>np2list</strong> (<em>bool</em>) – Convert numpy data arryay (lookup table) to a python list.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – Linear lookup table configuration as a dictionary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutEntry">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LutEntry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manager</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager"><span class="pre">xopto.mcbase.mcutil.lut.LutManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutEntry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Lookup table entry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manager</strong> (<a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager"><em>LutManager</em></a>) – Manager of this lookup table entry.</p></li>
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Lookup table data as a numpy array.</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – Offset of the first element of this lookup table in the common
lookup table buffer.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutEntry.data">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="pre">:</span> <span class="pre">xopto.mcbase.mcutil.lut.LutManager</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutEntry.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Data array of the entry.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutEntry.manager">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">manager</span></span><em class="property"><span class="pre">:</span> <span class="pre">xopto.mcbase.mcutil.lut.LutManager</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutEntry.manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup table manager that manages this entry.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutEntry.offset">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">offset</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutEntry.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset of the first element of this lookup table entry from the beginning of the data buffer.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManager">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LutManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages the data of multiple lookup tables. The lookup tables can be
easily packed into a single contiguous array that is passed to an
OpenCL kernel.</p>
<p>Creates a new instance of the lookup table manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dtype</strong> (<em>np.dtype</em>) – Data type of the array that will contain all the managed
lookup table arrays.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManager.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lut</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutEntry" title="xopto.mcbase.mcutil.lut.LutEntry"><span class="pre">xopto.mcbase.mcutil.lut.LutEntry</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManager.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManager.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a new lookup table to the list of managed lookup tables and
returns the offset from the first element of the contiguous array of
all managed lookup tables.</p>
<p>A lookup table is appended only if an existing lookup table with the
same values is not found in the list of managed lookup tables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lut</strong> (<em>np.ndarray vector</em>) – A new lookup table to append to the list of managed lookup tables.
The new lookup table is appended only if the same lookup table i
not found in the list of existing lookup tables.</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – If True, the lookup table is appended without comparing its content
to the list of existing managed lookup tables. This improves the
performance but can grow the total size of the contiguous
data array due to duplicate lookup tables in the managed list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>lut</strong> (<em>LutEntry</em>) – Lookup table entry representing the given data.</p></li>
<li><p><strong>added</strong> (<em>bool</em>) – True if a lookup table entry with the same data was not
found among the existing managed lookup table entries.
If the value of the force argument is True,
this value is always returned as True.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManager.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManager.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManager.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the lookup table manager - remove all the managed data entries.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManager.dtype">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.dtype</span></em><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManager.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup table data type.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManager.offset">
<span class="sig-name descname"><span class="pre">offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lut</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManager.offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManager.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the offset of the first element in the lookuptable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lut</strong> (<em>np.ndarray</em>) – Lookup table array as passed to the append method.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>offset</strong> – Offset of the first element or None if the lookup table
is not found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManager.pack_into">
<span class="sig-name descname"><span class="pre">pack_into</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManager.pack_into"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManager.pack_into" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the lookup tables into a contiguous numpy array.
If target is None, a new target array is created using the data type
specified in dtype. If the target array is too small to fit all the
data, a new target of the same data type is allocated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>np.ndarray</em>) – A contiguous numpy array that will hold the lookup tables
on return. One of the input arguments target and dtype must
not be None!</p></li>
<li><p><strong>dtype</strong> (<em>np.dtype</em>) – This data type overloads the data type passed to the constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – A contiguous numpy array with all the lookup tables.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManagers">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LutManagers</span></span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManagers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManagers" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages multiple lookup table managers of type
<a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">LutManager</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManagers.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManagers.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManagers.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the data (managed data arrays) of all the managers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.LutManagers.manager">
<span class="sig-name descname"><span class="pre">manager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.dtype</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager"><span class="pre">xopto.mcbase.mcutil.lut.LutManager</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#LutManagers.manager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.LutManagers.manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Return lookup table manager for the given data type.
Lookup table managers are created on the first demand/use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dtype</strong> (<em>np.dtype</em>) – Numpy data type of the lookup table manager.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>allocator</strong> – Lookup table manager.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager">LutManager</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lookup table managers can be retrieved by the [] operator that takes
the numpy data type of the lookup table manager.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.RestrictedLutManagers">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">RestrictedLutManagers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtypes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#RestrictedLutManagers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.RestrictedLutManagers" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManagers" title="xopto.mcbase.mcutil.lut.LutManagers"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcutil.lut.LutManagers</span></code></a></p>
<p>Manages multiple lookup table managers of type
<a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">LutManager</span></code></a>. The range of data types is restricted to
list of dtypes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dtypes</strong> (<em>list</em><em> or </em><em>tuple</em>) – List of data types as numpy.dtype that will be supported by the
instance.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mcutil.lut.RestrictedLutManagers.manager">
<span class="sig-name descname"><span class="pre">manager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.dtype</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager"><span class="pre">xopto.mcbase.mcutil.lut.LutManager</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mcutil/lut.html#RestrictedLutManagers.manager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mcutil.lut.RestrictedLutManagers.manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Return lookup table manager for the given data type.
Lookup table managers are created on the first demand/use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dtype</strong> (<em>np.dtype</em>) – Numpy data type of the lookup table manager.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>allocator</strong> – Lookup table manager.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#xopto.mcbase.mcutil.lut.LutManager" title="xopto.mcbase.mcutil.lut.LutManager">LutManager</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lookup table managers can be retrieved by the [] operator that takes
the numpy data type of the lookup table manager.</p>
</div>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/xopto_logo_bright.png" alt="Logo"/>
    
    <h1 class="logo logo-name">PyXOpto</h1>
    
  </a>
</p>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../source/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/opencl_devices.html">OpenCL devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mcml/index.html">Layered MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mcvox/index.html">Voxelized MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/dataset/index.html">Datasets</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">xopto</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="xopto.html">xopto package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="xopto.html#subpackages">Subpackages</a></li>
<li class="toctree-l3"><a class="reference internal" href="xopto.html#module-xopto">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">xopto</a><ul>
  <li><a href="xopto.html">xopto package</a><ul>
  <li><a href="xopto.mcbase.html">xopto.mcbase package</a><ul>
  <li><a href="xopto.mcbase.mcutil.html">xopto.mcbase.mcutil package</a><ul>
      <li>Previous: <a href="xopto.mcbase.mcutil.interp.html" title="previous chapter">xopto.mcbase.mcutil.interp module</a></li>
      <li>Next: <a href="xopto.mcbase.cltypes.html" title="next chapter">xopto.mcbase.cltypes module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, XOpto team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>