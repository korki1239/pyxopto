

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>xopto.mcbase.mctrace module &mdash; PyXOpto 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="xopto.mcbase.mctypes module" href="xopto.mcbase.mctypes.html" />
    <link rel="prev" title="xopto.mcbase.mctest module" href="xopto.mcbase.mctest.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PyXOpto
          

          
            
            <img src="../_static/xopto_logo_dark.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../source/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/opencl_devices.html">OpenCL devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mcml/index.html">Layered MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mccyl/index.html">Cylindrical MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/mcvox/index.html">Voxelized MC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/dataset/index.html">Datasets</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">xopto</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="xopto.html">xopto package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="xopto.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="xopto.cl.html">xopto.cl package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.data.html">xopto.data package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.dataset.html">xopto.dataset package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.materials.html">xopto.materials package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="xopto.mcbase.html">xopto.mcbase package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.mccyl.html">xopto.mccyl package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.mcml.html">xopto.mcml package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.mcvox.html">xopto.mcvox package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.pf.html">xopto.pf package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.src.html">xopto.src package</a></li>
<li class="toctree-l4"><a class="reference internal" href="xopto.util.html">xopto.util package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="xopto.html#module-xopto">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyXOpto</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">xopto</a> &raquo;</li>
        
          <li><a href="xopto.html">xopto package</a> &raquo;</li>
        
          <li><a href="xopto.mcbase.html">xopto.mcbase package</a> &raquo;</li>
        
      <li>xopto.mcbase.mctrace module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-xopto.mcbase.mctrace">
<span id="xopto-mcbase-mctrace-module"></span><h1>xopto.mcbase.mctrace module<a class="headerlink" href="#module-xopto.mcbase.mctrace" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pz</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pl</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Trace filter constructor. Creates a filter of traced photon packets
according to the final position of the photon packet. Set the unused
filter parameters to None - default value. Filters are
connected through a logical and.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>) or </em><em>(</em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>...</em><em>)</em>) – Final x coordinate of the photon packet must be within the
specified interval including the boundaries (xmin, xmax). Multiple
intervals can be specified as a list or tuple of intervals.</p></li>
<li><p><strong>y</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>) or </em><em>(</em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>...</em><em>)</em>) – Final y coordinate of the photon packet must be within the
specified interval including the boundaries (ymin, ymax). Multiple
intervals can be specified as a list or tuple of intervals.</p></li>
<li><p><strong>z</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>) or </em><em>(</em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>...</em><em>)</em>) – Final z coordinate of the photon packet must be within the
specified interval including the boundaries (zmin, zmax). Multiple
intervals can be specified as a list or tuple of intervals.</p></li>
<li><p><strong>pz</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>)</em>) – Final z component of the photon packet propagation direction must
be within the specified interval. Note that the z component of
the propagation direction of photon packets terminated at the
top sample boundary is negative!. Multiple intervals can be
specified as a list or tuple of intervals.</p></li>
<li><p><strong>dir</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>float</em><em>)</em><em>)</em>) – The cosine of the angle between the given direction and the final
direction of the photon packet must be within the specified
interval (cosmin, cosmax, (px, py, pz)).
Multiple filters can be specified as a list or tuple.</p></li>
<li><p><strong>r</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>) or </em><em>(</em><em>(</em><em>float</em><em>, </em><em>float</em><em>, </em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>)</em><em>, </em><em>...</em><em>)</em>) – Final r=sqrt((x-xo)**2 + (y - yo)**2) coordinate of the photon
packet must be within the specified radius (rmin, rmax). The
radius is calculated with respect to the given origin
(x0, y0). Multiple filters can be specified as a list or tuple
of (rmin, rmax, (x0, y0)).</p></li>
<li><p><strong>pl</strong> (<em>(</em><em>float</em><em>, </em><em>float</em><em>) or </em><em>(</em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>(</em><em>float</em><em>, </em><em>float</em><em>)</em><em>, </em><em>...</em><em>)</em>) – Final optical path length traveled by the photon packet must be
within the specified interval including the boundaries
(plmin, plmax). Multiple intervals can be specified as a list or
tuple of intervals.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.dir">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dir</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter of the propagation direction as (cosmin, cosmax, (px, py, pz)).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.fromdict">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mcbase.mctrace.Filter" title="xopto.mcbase.mctrace.Filter"><span class="pre">xopto.mcbase.mctrace.Filter</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Filter.fromdict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.fromdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Filter instance from a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – Dictionary created by the <a class="reference internal" href="#xopto.mcbase.mctrace.Filter.todict" title="xopto.mcbase.mctrace.Filter.todict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Filter.todict()</span></code></a> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.pl">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pl</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.pl" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter of the optical pathlength as ((pl_min, pl_max), …).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.pz">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pz</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.pz" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter of the z component of the propagation direction as (pz_min, pz_max).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.r">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">r</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.r" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter of r=sqrt(x*x + y*y) as ((r_min, r_max, (x_origin, y_origin)), …).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.todict">
<span class="sig-name descname"><span class="pre">todict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">dict</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Filter.todict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the filter configuration to a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>data</strong> – Filter configuration as a dictionary.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.x">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">x</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.x" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter of the x coordinate as ((x_min, x_max), …).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.y">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">y</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.y" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter of the y coordinate as ((y_min, y_max), …).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Filter.z">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">z</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Filter.z" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter of the z coordinate as ((z_min, z_max), …).</p>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_ABSORPTION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_ABSORPTION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">16</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_ABSORPTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all packet absorption events.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_ALL">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_ALL</span></span><em class="property"> <span class="pre">=</span> <span class="pre">-1</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_ALL" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all events.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_BOUNDARY_HIT">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_BOUNDARY_HIT</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_BOUNDARY_HIT" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all geometry boundary hit events.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_ESCAPE">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_ESCAPE</span></span><em class="property"> <span class="pre">=</span> <span class="pre">128</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_ESCAPE" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace events that are triggered by packet escaping/leaving the simulation domain.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_LAUNCH">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_LAUNCH</span></span><em class="property"> <span class="pre">=</span> <span class="pre">8</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_LAUNCH" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all packet launch events.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_REFLECTION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_REFLECTION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_REFLECTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all packet reflection events at geometry boundaries.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_REFRACTION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_REFRACTION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_REFRACTION" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all packet refraction events at geometry boundaries.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_SCATTERING">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_SCATTERING</span></span><em class="property"> <span class="pre">=</span> <span class="pre">32</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_SCATTERING" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all packet scattering events.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.TRACE_EVENT_TERMINATION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_TERMINATION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">64</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.TRACE_EVENT_TERMINATION" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace all packet termination events.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxlen</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#xopto.mcbase.mctrace.Filter" title="xopto.mcbase.mctrace.Filter"><span class="pre">xopto.mcbase.mctrace.Filter</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_mask</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plon</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">xopto.mcbase.mcobject.McObject</span></code></a></p>
<p>Photon packet trace interface.</p>
<p>Photon packet trace object constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maxlen</strong> (<em>int</em><em> or </em><a class="reference internal" href="#xopto.mcbase.mctrace.Trace" title="xopto.mcbase.mctrace.Trace"><em>Trace</em></a>) – <p>Maximum number of trace entries (events) per photon packet.
If maxlen is an instance of Trace, a new copy of the trace object
is created.
Each trace entry is composed of seven fields that describe the
state of the photon packet at the time of the event:</p>
<p>’x’ - x coordinate of the photon packet</p>
<p>’y’ - y coordinate of the photon packet</p>
<p>’z’ - z coordinate of the photon packet</p>
<p>’px’ - x component of the photon packet propagation direction</p>
<p>’py’ - y component of the photon packet propagation direction</p>
<p>’pz’ - z component of the photon packet propagation direction</p>
<p>’w’  - photon packet weight</p>
<p>’pl’ - photon path length</p>
</p></li>
<li><p><strong>options</strong> (<em>int</em>) – <p>Trace options must be formed by combining (logical or) the
following flags:</p>
<blockquote>
<div><p>TRACE_START - trace the initial photon packet state</p>
<p>TRACE_END - trace the final/terminal photon packet state</p>
<p>TRACE_ALL - trace all (scattering/absorption and boundary transition) events</p>
</div></blockquote>
</p></li>
<li><p><strong>filter</strong> (<a class="reference internal" href="#xopto.mcbase.mctrace.Filter" title="xopto.mcbase.mctrace.Filter"><em>Filter</em></a>) – Filter trace results according to the supplied filter.
A filter class needs to define a __call__ method that returns a
new Trace instance with filtered events.
See the Filter class for details and example.</p></li>
<li><p><strong>event_mask</strong> (<em>int</em>) – <p>A mask of event flags that are recorded/traced in the MC
kernel. If None, all events are traced and event tracking
is disabled (default). Note that event tracking comes with some
performance cost. All events should be traced when computing
the sampling volume!
The following events can be used with the event mask:</p>
<blockquote>
<div><ul>
<li><p>TRACE_EVENT_LAUNCH, tracing all packet launch events</p></li>
<li><p>TRACE_EVENT_ABSORPTION, tracing all packet absorption events</p></li>
<li><p>TRACE_EVENT_SCATTERING, tracing all packet scattering events</p></li>
<li><p>TRACE_EVENT_BOUNDARY_HIT, tracing all geometry boundary interactions</p></li>
<li><p>TRACE_EVENT_REFLECTION, tracing all packet reflection events at geometrical boundaries</p></li>
<li><p>TRACE_EVENT_REFRACTION, tracing all packet refraction events at geometrical boundaries</p></li>
<li><p>TRACE_EVENT_TERMINATION, tracing packet termination</p></li>
<li><p>TRACE_EVENT_ESCAPE, packet escapes the simulation domain</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>plon</strong> (<em>bool</em>) – Turn on/off tracking of the optical pathlength. If set to nonzero,
the simulator option MC_TRACK_OPTICAL_PATHLENGTH will be set
turning on the tracking of optical pathlength.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The value of maxlen parameter is automatically adjusted to:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>1 - if only the TRACE_START or TRACE_END option flags are set,</p></li>
<li><p>2 - if the TRACE_START and the TRACE_END option flags are set,</p></li>
<li><p>left unchanged if the TRACE_ALL option flag is set.</p></li>
</ol>
</div></blockquote>
<p>Use the update method to convert raw simulation output buffer into
a numpy structured array with items ‘x’, ‘y’, ‘z’, ‘px’, ‘py’, ‘pz’,
and ‘w’.
The array shape is (nphotons, length). To access the trace of first
photon packet use obj.data[0]</p>
<p>The number of valid trace entries for each photon packet can
be obtained by obj.n (e.g. obj.n[0] for the first photon packet).</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_ALL">
<span class="sig-name descname"><span class="pre">TRACE_ALL</span></span><em class="property"> <span class="pre">=</span> <span class="pre">7</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_ALL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_END">
<span class="sig-name descname"><span class="pre">TRACE_END</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_END" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_ENTRY_LEN">
<span class="sig-name descname"><span class="pre">TRACE_ENTRY_LEN</span></span><em class="property"> <span class="pre">=</span> <span class="pre">8</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_ENTRY_LEN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_ABSORPTION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_ABSORPTION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">16</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_ABSORPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_ALL">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_ALL</span></span><em class="property"> <span class="pre">=</span> <span class="pre">-1</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_ALL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_BOUNDARY_HIT">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_BOUNDARY_HIT</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_BOUNDARY_HIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_ESCAPE">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_ESCAPE</span></span><em class="property"> <span class="pre">=</span> <span class="pre">128</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_ESCAPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_LAUNCH">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_LAUNCH</span></span><em class="property"> <span class="pre">=</span> <span class="pre">8</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_LAUNCH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_REFLECTION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_REFLECTION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_REFLECTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_REFRACTION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_REFRACTION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_REFRACTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_SCATTERING">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_SCATTERING</span></span><em class="property"> <span class="pre">=</span> <span class="pre">32</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_SCATTERING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_EVENT_TERMINATION">
<span class="sig-name descname"><span class="pre">TRACE_EVENT_TERMINATION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">64</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_EVENT_TERMINATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_NONE">
<span class="sig-name descname"><span class="pre">TRACE_NONE</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_NONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.TRACE_START">
<span class="sig-name descname"><span class="pre">TRACE_START</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.TRACE_START" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.apply_filter">
<span class="sig-name descname"><span class="pre">apply_filter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.apply_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.apply_filter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.cl_declaration">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">cl_declaration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.cl_declaration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.cl_declaration" title="Permalink to this definition">¶</a></dt>
<dd><p>Structure that defines the trace in the Monte Carlo simulator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.cl_implementation">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">cl_implementation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.cl_implementation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.cl_implementation" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of the trace in the Monte Carlo simulator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.cl_options">
<span class="sig-name descname"><span class="pre">cl_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.cl_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.cl_options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.cl_pack">
<span class="sig-name descname"><span class="pre">cl_pack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><span class="pre">xopto.cl.cltypes.Structure</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphotons</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><span class="pre">xopto.cl.cltypes.Structure</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.cl_pack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.cl_pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills the ctypes structure (target) with the data required by the
Monte Carlo simulator. See the Trace.cl_type class for a detailed
list of fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Monte Carlo simulator instance.</p></li>
<li><p><strong>target</strong> (<a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><em>cltypes.Structure</em></a>) – Ctypes structure that is filled with the source data.</p></li>
<li><p><strong>nphotons</strong> (<em>int</em>) – The number of photon packets that will be run by the simulator.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>target</strong> – Filled ctypes structure received as an input argument or a new
instance if the input argument target is None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure">cltypes.Structure</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.cl_type">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">cl_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure"><span class="pre">xopto.cl.cltypes.Structure</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.cl_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.cl_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Structure that is passed to the Monte carlo simulator kernel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>McObject</em></a>) – A Monte Carlo simulator instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>struct</strong> – A structure type that represents a trace in the Monte Carlo kernel.</p>
<p>The returned structure type implements the following fields:</p>
<ul class="simple">
<li><dl class="simple">
<dt>max_events: mc_int_t</dt><dd><p>Maximum number of trace events per photon packet.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>data_buffer_offset: mc_size_t</dt><dd><p>Offset of the first element of the trace data buffer.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>count_buffer_offset: mc_size_t</dt><dd><p>Offset of the first element of the trace event counter buffer.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="xopto.cl.cltypes.html#xopto.cl.cltypes.Structure" title="xopto.cl.cltypes.Structure">cltypes.Structure</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.data">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.data_to_cl">
<span class="sig-name descname"><span class="pre">data_to_cl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.data_to_cl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.data_to_cl" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the trace data array for upload to the OpenCL kernel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Simulator instance that will use the data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cl_data</strong> – Flat numpy data array of basic type ready for transfer to the
OpenCL device.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.dropped">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dropped</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.dropped" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of photon packets that matched the filter, but were dropped due to exceeding the maximum trace length.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.dtype</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.dtype"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a structure numpy data type that represents the trace data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Instance of the Monte Carlo simulator which will be used with this
trace object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.event_mask">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">event_mask</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.event_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask of traced events.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.filter">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">filter</span></span><em class="property"><span class="pre">:</span> <span class="pre">xopto.mcbase.mctrace.Filter</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace filter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.float_len">
<span class="sig-name descname"><span class="pre">float_len</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nphotons</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.float_len"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.float_len" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of float values required to save trace data for the given number
of photon packets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nphotons</strong> (<em>int</em>) – Number of photon packets to trace</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.fromdict">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#xopto.mcbase.mctrace.Trace" title="xopto.mcbase.mctrace.Trace"><span class="pre">xopto.mcbase.mctrace.Trace</span></a><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.fromdict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.fromdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Trace instance from a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – Dictionary created by the <a class="reference internal" href="#xopto.mcbase.mctrace.Trace.todict" title="xopto.mcbase.mctrace.Trace.todict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Trace.todict()</span></code></a> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.maxlen">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">maxlen</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.maxlen" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum trace length.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.n">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">n</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.n" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of trace events for each photon packet.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.n_to_cl">
<span class="sig-name descname"><span class="pre">n_to_cl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.n_to_cl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.n_to_cl" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the array with number of events per photon packet for
upload to the OpenCL kernel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Simulator instance that will use the data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cl_data</strong> – Flat numpy data array of basic type ready for transfer to the
OpenCL device.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.np_buffer">
<span class="sig-name descname"><span class="pre">np_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">allocation</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcutil.buffer.html#xopto.mcbase.mcutil.buffer.BufferAllocation" title="xopto.mcbase.mcutil.buffer.BufferAllocation"><span class="pre">xopto.mcbase.mcutil.buffer.BufferAllocation</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphotons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.np_buffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.np_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Efficient numpy buffer allocation that can be used to directly download
data to the Trace object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Simulator instance that produced the results.</p></li>
<li><p><strong>allocation</strong> – Buffer allocation made by the <a class="reference internal" href="#xopto.mcbase.mctrace.Trace.cl_pack" title="xopto.mcbase.mctrace.Trace.cl_pack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Trace.cl_pack()</span></code></a> method.</p></li>
<li><p><strong>nphotons</strong> (<em>int</em>) – The number of photon packets traced by the simulation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>np_buffer</strong> – A numpy buffer that can be used to directly download the data
(no copy is required in the <a class="reference internal" href="#xopto.mcbase.mctrace.Trace.update_data" title="xopto.mcbase.mctrace.Trace.update_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Trace.update_data()</span></code></a> method).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.nphotons">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nphotons</span></span><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.nphotons" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of photon packets in the trace.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.options">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">options</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile time trace options.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.overflow">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">overflow</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.overflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary mask of photon packets that have overflowed the trace</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.plon">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">plon</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.plon" title="Permalink to this definition">¶</a></dt>
<dd><p>State of the optical pathlength tracking.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inds</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'3d'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">matplotlib.axes.Axes</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the paths of photon packets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inds</strong> (<em>np.ndarray</em>) – A vector of indices or a logical mask for selecting the photon
packet. If a logical mask, the shape of the mask should be
(num_packets).</p></li>
<li><p><strong>view</strong> (<em>str</em>) – <p>A string that specifies the plot view:</p>
<ul>
<li><p>’xy’ - projection into the x-y plane.</p></li>
<li><p>’xy’ - projection into the x-z plane.</p></li>
<li><p>’xy’ - projection into the y-z plane.</p></li>
<li><p>’3d’ - 3D plot (default).</p></li>
</ul>
</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – If True, show the plot.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em>) – A 3D matplotlib axis that will be used to plot the traces or
None to create a new figure.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.terminal">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">terminal</span></span><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.terminal" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminal/final state of the photon packets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.todict">
<span class="sig-name descname"><span class="pre">todict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">dict</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.todict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the trace configuration without the accumulator data to
a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>data</strong> – Trace configuration as a dictionary.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#xopto.mcbase.mctrace.Trace" title="xopto.mcbase.mctrace.Trace"><span class="pre">xopto.mcbase.mctrace.Trace</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the trace with data from the given trace object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<a class="reference internal" href="#xopto.mcbase.mctrace.Trace" title="xopto.mcbase.mctrace.Trace"><em>Trace</em></a>) – Update the trace of this instance with the data
from Trace instance obj.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="xopto.mcbase.mctrace.Trace.update_data">
<span class="sig-name descname"><span class="pre">update_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><span class="pre">xopto.mcbase.mcobject.McObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.dtype</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphotons</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xopto/mcbase/mctrace.html#Trace.update_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#xopto.mcbase.mctrace.Trace.update_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the content of raw data accumulators with simulation results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mc</strong> (<a class="reference internal" href="xopto.mcbase.mcobject.html#xopto.mcbase.mcobject.McObject" title="xopto.mcbase.mcobject.McObject"><em>mcobject.McObject</em></a>) – Simulator instance that produced the data.</p></li>
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>np.dtype</em><em>, </em><em>List</em><em>[</em><em>np.ndarray</em><em>]</em><em>]</em>) – Dict of allocated buffers (this implementation
uses only one integer and one floating point buffer).</p></li>
<li><p><strong>nphotons</strong> (<em>int</em>) – Number of photon packets used in the simulations.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – Additional keyword arguments not used by this implementation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="xopto.mcbase.mctypes.html" class="btn btn-neutral float-right" title="xopto.mcbase.mctypes module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="xopto.mcbase.mctest.html" class="btn btn-neutral float-left" title="xopto.mcbase.mctest module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, XOpto team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>